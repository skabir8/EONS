<!DOCTYPE html>
<html>
  <head>
    <title>Simple Map</title>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <div id="map"></div>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&libraries=geometry"></script>
    <script>
      var map;
      function initMap() {
        var origin = {
          lat: parseFloat(data['origin'][0]),
          lng: parseFloat(data['origin'][1])
        };
        var dest = {
          lat: parseFloat(data['destination'][0]),
          lng: parseFloat(data['destination'][1])
        };
        var middle = {lat: (origin2.lat+dest2.lat)/2, lng: (origin2.lng+dest2.lng)/2};
        var route = new Array({{data['way1']}});
        var route2 = new Array({{data['way2']}});

        var all_camera_pos = [brooklyn, queens, manhattan, staten_island, bronx];
        var all_camera_link = [brooklyn_links, queens_links, manhattan_links, staten_island_links, bronx_links];

        var bronx = new Array({lat: 40.8201415, lng: -73.9130692}, {lat: 40.8311993, lng: -73.90032889999999}, {lat: 40.80778189999999, lng: -73.9295152}, {lat: 40.8228401, lng: -73.88266770000001}, {lat: 40.834927, lng: -73.894341}, {lat: 40.8433244, lng: -73.89298649999999}, {lat: -3.1133909, lng: -59.9770398}, {lat: 40.8138009, lng: -73.9313702}, {lat: 40.8624565, lng: -73.89693439999999}, {lat: 40.8267198, lng: -73.922624}, {lat: 40.8185166, lng: -73.9272715}, {lat: 40.8846196, lng: -73.9149079}, {lat: 40.8280969, lng: -73.9335143}, {lat: 40.8291147, lng: -73.92888219999999}, {lat: 40.8036156, lng: -73.91589549999999}, {lat: 40.8277942, lng: -73.9118528}, {lat: 40.8841352, lng: -73.8261133}, {lat: 40.8563742, lng: -73.8388296}, {lat: 40.856701, lng: -73.8693195}, {lat: 40.8644596, lng: -73.81331279999999}, {lat: 42.140847, lng: -72.561989}, {lat: 40.8279071, lng: -73.912172}, {lat: 40.8519031, lng: -73.89837340000001});
        var brooklyn = new Array({lat: 40.6113471, lng: -74.0348607}, {lat: 40.6890694, lng: -73.9904754}, {lat: 40.4536478, lng: -76.9687797}, {lat: 40.5756434, lng: -73.9735422}, {lat: 41.768027, lng: -87.79838509999999}, {lat: 40.6043852, lng: -74.01879210000001}, {lat: 40.652683, lng: -73.8644241}, {lat: 40.5967529, lng: -73.9060863}, {lat: 40.5896199, lng: -73.96575849999999}, {lat: 40.64278789999999, lng: -73.877181}, {lat: 40.7085855, lng: -73.83899579999999}, {lat: 40.71891249999999, lng: -73.95871249999999}, {lat: 40.6911302, lng: -73.9985411}, {lat: 40.7491986, lng: -73.8969491}, {lat: 40.680143, lng: -74.00467549999999}, {lat: 40.7055431, lng: -73.96784579999999}, {lat: 40.7025075, lng: -73.95635399999999}, {lat: 40.6992396, lng: -73.98591329999999}, {lat: 40.6992711, lng: -73.9831075}, {lat: 40.7082657, lng: -73.9551147}, {lat: 40.6674842, lng: -73.92186989999999}, {lat: 40.7131538, lng: -73.9656466}, {lat: 40.7007381, lng: -73.9897263}, {lat: 40.589686, lng: -73.900223}, {lat: 40.6223824, lng: -73.9366314}, {lat: 40.58142309999999, lng: -73.8911852}, {lat: 40.69611039999999, lng: -73.98467649999999}, {lat: 40.6920759, lng: -73.9826145}, {lat: 40.6849166, lng: -73.9780674}, {lat: 40.6840487, lng: -73.9773989}, {lat: 40.6802599, lng: -73.9746933}, {lat: 40.6117136, lng: -74.03074079999999}, {lat: 40.6238796, lng: -74.01902179999999}, {lat: 40.679744, lng: -73.986961}, {lat: 30.5921485, lng: -83.1238166}, {lat: 30.5921485, lng: -83.1238166}, {lat: 40.6265527, lng: -73.9709271}, {lat: 40.5978369, lng: -73.9654094}, {lat: 40.5911208, lng: -73.9650558}, {lat: 40.6361491, lng: -73.9726597}, {lat: 40.6056704, lng: -73.9669524}, {lat: 40.575233, lng: -73.96882269999999}, {lat: 40.7028961, lng: -73.99477999999999}, {lat: 40.7007584, lng: -73.9910319}, {lat: 40.6628041, lng: -73.9883224}, {lat: 40.6614724, lng: -73.9861274}, {lat: 40.6390018, lng: -97.58116109999999}, {lat: 42.7179235, lng: -71.15479479999999}, {lat: 40.6493572, lng: -73.97541319999999}, {lat: 40.6667704, lng: -73.99481220000001}, {lat: 40.6999449, lng: -73.9883511}, {lat: 40.596744, lng: -73.985266}, {lat: 40.5792193, lng: -73.98194640000001}, {lat: 40.57555079999999, lng: -73.9811812}, {lat: 42.21886, lng: -70.96713});
        var manhattan = new Array({lat: 40.7921896, lng: -73.9382043}, {lat: 40.8009838, lng: -73.9317793}, {lat: 40.7368841, lng: -73.9785259}, {lat: 40.7488077, lng: -73.9697163}, {lat: 40.7614857, lng: -73.9606064}, {lat: 40.776876, lng: -73.9493739}, {lat: 40.7832132, lng: -73.9447555}, {lat: 40.7229826, lng: -73.9885359}, {lat: 40.7691193, lng: -73.9885587}, {lat: 40.7522373, lng: -74.00091019999999}, {lat: 40.7557842, lng: -74.00197}, {lat: 40.7608399, lng: -73.99831999999999}, {lat: 41.4300137, lng: -97.3418461}, {lat: 38.542693, lng: -121.490274}, {lat: 40.7570868, lng: -74.0050236}, {lat: 40.7619645, lng: -74.0010678}, {lat: 40.7715333, lng: -73.99421269999999}, {lat: 40.7378922, lng: -73.9809199}, {lat: 40.7459057, lng: -73.9739882}, {lat: 40.7498231, lng: -73.9722048}, {lat: 40.7542506, lng: -73.968974}, {lat: 40.7599732, lng: -73.96481039999999}, {lat: -16.0084503, lng: -48.0827812}, {lat: 40.77012, lng: -73.9574092}, {lat: 40.732349, lng: -73.9849373}, {lat: 40.8637, lng: -73.91706839999999}, {lat: 40.7388368, lng: -73.9831597}, {lat: 40.7457167, lng: -73.97811949999999}, {lat: 40.7507813, lng: -73.9744652}, {lat: 40.75521699999999, lng: -73.97124029999999}, {lat: 40.7602719, lng: -73.9675409}, {lat: 40.7615833, lng: -73.9665806}, {lat: 40.7332802, lng: -73.98719609999999}, {lat: 40.7415708, lng: -73.9895773}, {lat: 40.7484394, lng: -73.9845729}, {lat: 40.75348470000001, lng: -73.9808766}, {lat: 40.757906, lng: -73.9776394}, {lat: 40.7680282, lng: -73.9702767}, {lat: 40.7879094, lng: -73.95577639999999}, {lat: 40.737368, lng: -73.9968432}, {lat: 40.742903, lng: -73.99279779999999}, {lat: 41.506039, lng: -90.55324209999999}, {lat: 40.7548422, lng: -73.98410880000002}, {lat: 40.7592723, lng: -73.9808828}, {lat: 40.7643285, lng: -73.9771987}, {lat: 40.7649999, lng: -73.97670029999999}, {lat: 40.72785940000001, lng: -74.0030949}, {lat: 40.8216147, lng: -73.93898450000002}, {lat: 40.7441027, lng: -73.9956435}, {lat: 40.7510335, lng: -73.99059989999999}, {lat: 40.75666880000001, lng: -73.98636909999999}, {lat: 40.7604566, lng: -73.9837229}, {lat: 40.7655479, lng: -73.980042}, {lat: 40.7397433, lng: -74.0025294}, {lat: 40.7521936, lng: -73.993451}, {lat: 40.7572276, lng: -73.989793}, {lat: 40.7616616, lng: -73.9865631}, {lat: 39.9873509, lng: -82.917858}, {lat: 40.7452994, lng: -73.9984832}, {lat: 40.7465137, lng: -74.00136549999999}, {lat: 40.7534056, lng: -73.9963183}, {lat: 40.7552896, lng: -73.9949084}, {lat: 40.7584279, lng: -73.9926448}, {lat: 40.76286580000001, lng: -73.9894109}, {lat: 40.7679312, lng: -73.9857243}, {lat: 40.8461712, lng: -73.93232789999999}, {lat: 40.7786086, lng: -73.9816391}, {lat: 40.7876872, lng: -73.9750135}, {lat: 40.8133758, lng: -73.9562662}, {lat: 40.84816920000001, lng: -73.930859}, {lat: 40.7710569, lng: -73.9871465}, {lat: 40.7175486, lng: -73.9993157}, {lat: 10.7764658, lng: 76.6533879}, {lat: 10.7764658, lng: 76.6533879}, {lat: -21.1980309, lng: -41.90145}, {lat: -26.2764664, lng: -48.8116138}, {lat: 40.8264107, lng: -73.9503568}, {lat: 40.8417097, lng: -73.9394058}, {lat: 40.7558274, lng: -73.9864369}, {lat: 40.7565519, lng: -73.9860561}, {lat: 40.7587088, lng: -73.98536659999999}, {lat: 40.7620705, lng: -73.9836763}, {lat: 40.7947162, lng: -73.9719197}, {lat: 40.7141829, lng: -74.0062971}, {lat: 40.7113811, lng: -74.00865089999999}, {lat: 40.7069506, lng: -73.9905277}, {lat: 40.7124771, lng: -74.0048252}, {lat: 40.719393, lng: -74.0018987}, {lat: 40.715134, lng: -73.99263289999999}, {lat: 40.7158537, lng: -73.9950503}, {lat: 40.7677123, lng: -73.9817016}, {lat: 40.7942047, lng: -73.962847}, {lat: 40.7717916, lng: -73.9792078}, {lat: 40.7724281, lng: -73.9787386}, {lat: 40.7762238, lng: -73.9759669}, {lat: 40.7794829, lng: -73.97358109999999}, {lat: 40.7820454, lng: -73.9717106}, {lat: 40.7852883, lng: -73.96934999999999}, {lat: 40.791669, lng: -73.96469069999999}, {lat: 41.4893454, lng: -73.05570469999999}, {lat: 40.7120484, lng: -74.01011319999999}, {lat: 40.7729826, lng: -73.9820422}, {lat: 40.7928698, lng: -73.9646115}, {lat: 40.7589828, lng: -73.9939358}, {lat: 31.63334339999999, lng: -87.1118233}, {lat: 31.63334339999999, lng: -87.1118233}, {lat: 40.7215427, lng: -73.9837991}, {lat: 40.7200008, lng: -73.978731}, {lat: 40.7360959, lng: -73.97479489999999}, {lat: 40.7519467, lng: -73.9652073}, {lat: 25.890397, lng: -80.227716}, {lat: 40.7549702, lng: -73.9622404}, {lat: 40.7216159, lng: -73.9747667}, {lat: 40.7132199, lng: -73.9776018}, {lat: 40.7116965, lng: -73.9796972}, {lat: 40.7241711, lng: -73.9735436}, {lat: 40.7918764, lng: -73.93560579999999}, {lat: 40.7309571, lng: -73.9739352}, {lat: 40.7354436, lng: -73.97511399999999}, {lat: 40.7457746, lng: -73.9704323}, {lat: 40.7702932, lng: -73.94784}, {lat: 40.736068, lng: -73.9747971}, {lat: 40.7830235, lng: -73.94403740000001}, {lat: 40.7060855, lng: -73.9968643}, {lat: 40.7060855, lng: -73.9968643}, {lat: 45.499824, lng: -73.573489}, {lat: 40.7031866, lng: -74.00783559999999}, {lat: 40.7031866, lng: -74.00783559999999}, {lat: 40.8487566, lng: -73.9391658}, {lat: 40.8493281, lng: -73.93894089999999}, {lat: 40.7174309, lng: -73.9914517}, {lat: 40.7184706, lng: -73.9948124}, {lat: 40.7167197, lng: -73.9891595}, {lat: 40.7062713, lng: -74.0143192}, {lat: 53.6132471, lng: -113.6193337}, {lat: 40.8313711, lng: -73.9509206}, {lat: 53.6132471, lng: -113.6193337}, {lat: 53.6132471, lng: -113.6193337}, {lat: 40.7273989, lng: -74.021338}, {lat: 40.7240419, lng: -73.99254309999999}, {lat: 40.7253796, lng: -73.9968145}, {lat: 40.8077586, lng: -73.945422}, {lat: 40.8140919, lng: -73.94078360000002}, {lat: 40.7463886, lng: -73.9797348}, {lat: 40.7514584, lng: -73.9760635}, {lat: 40.7558687, lng: -73.9728397}, {lat: 40.7609254, lng: -73.9691296}, {lat: 40.7704246, lng: -73.96219719999999}, {lat: 40.747765, lng: -73.982957}, {lat: 40.7528072, lng: -73.9792702}, {lat: 40.7572296, lng: -73.9760446}, {lat: 40.7872316, lng: -73.9541591}, {lat: 40.8204825, lng: -73.9362933}, {lat: 40.6916968, lng: -74.0113689}, {lat: 40.7107051, lng: -73.9846518}, {lat: 41.8483361, lng: -87.81944879999999}, {lat: 40.7470385, lng: -73.98125499999999}, {lat: 40.7615707, lng: -73.9706449}, {lat: 40.7711473, lng: -73.9639279}, {lat: 40.7865034, lng: -73.95242739999999}, {lat: 40.7094531, lng: -74.00169869999999}, {lat: 40.7113271, lng: -74.0001448}, {lat: 40.7203285, lng: -74.0122787}, {lat: 41.6537892, lng: -72.75686139999999}, {lat: 40.8107804, lng: -73.9525943}, {lat: 40.8240437, lng: -73.94476759999999}, {lat: 40.8075871, lng: -73.932473}, {lat: 40.7348005, lng: -73.9907326}, {lat: 40.7068599, lng: -74.0049978}, {lat: 40.7051762, lng: -74.00739949999999}, {lat: 40.7024346, lng: -74.0128434}, {lat: 40.7268909, lng: -73.9999728}, {lat: 40.728767, lng: -74.0070847}, {lat: 40.719393, lng: -74.0018987}, {lat: 40.7298768, lng: -74.0107056}, {lat: 40.7152785, lng: -74.0135399}, {lat: 40.7291235, lng: -74.0105691}, {lat: 35.3359008, lng: -89.88226979999999}, {lat: 40.7151705, lng: -74.0021222}, {lat: 40.7159231, lng: -74.003777}, {lat: 40.7155837, lng: -74.0030377}, {lat: 40.7176579, lng: -74.0075459}, {lat: 40.761139, lng: -73.957916});
        var staten_island = new Array({lat: 40.5077375, lng: -74.23010099999999}, {lat: 40.5294356, lng: -74.1613881}, {lat: 40.5603695, lng: -74.1200025}, {lat: 40.5240461, lng: -74.1861328}, {lat: 40.5779521, lng: -74.10227950000001}, {lat: 40.5703899, lng: -74.1097346}, {lat: 40.534311, lng: -74.1540217}, {lat: 40.5866885, lng: -74.09205229999999}, {lat: 40.5191984, lng: -74.1971456}, {lat: 32.3661625, lng: -86.2865863}, {lat: 40.603618, lng: -74.0693029}, {lat: 40.6054764, lng: -74.07668799999999}, {lat: 40.6012116, lng: -74.0650162}, {lat: 40.52487259999999, lng: -74.2452856}, {lat: 40.6070983, lng: -74.0609933}, {lat: 40.630302, lng: -74.1060335}, {lat: 40.6122146, lng: -74.1325729}, {lat: 40.6007055, lng: -74.1950511}, {lat: 40.6357427, lng: -74.08373089999999}, {lat: 40.5912931, lng: -74.19388409999999}, {lat: 40.5834076, lng: -74.1921089}, {lat: 41.6996964, lng: -71.4470546}, {lat: 40.5912931, lng: -74.19388409999999});
        var queens = new Array({lat: 40.7604069, lng: -73.86144039999999}, {lat: 40.5818121, lng: -73.83827149999999}, {lat: 40.5859217, lng: -73.82322730000001}, {lat: 40.5775839, lng: -73.85976699999999}, {lat: 40.5987408, lng: -73.76602559999999}, {lat: 40.5894036, lng: -73.815584}, {lat: 40.6053269, lng: -73.75523799999999}, {lat: 39.7187947, lng: -93.2133726}, {lat: 39.168186, lng: -75.583857}, {lat: 40.6723297, lng: -73.73526869999999}, {lat: 40.7590615, lng: -73.9122828}, {lat: 40.758244, lng: -73.7769979}, {lat: 40.778967, lng: -73.7844446}, {lat: 40.7635858, lng: -73.83602909999999}, {lat: 40.747668, lng: -73.83360909999999}, {lat: 40.7582713, lng: -73.8343648}, {lat: 40.7546765, lng: -73.8330435}, {lat: 40.6166866, lng: -73.8249345}, {lat: 40.6788002, lng: -73.84414439999999}, {lat: 40.6625187, lng: -73.8408111}, {lat: 40.5988979, lng: -73.82076599999999}, {lat: 40.6095947, lng: -73.81912419999999}, {lat: 40.6692957, lng: -73.8425381}, {lat: 40.638577, lng: -73.83205199999999}, {lat: 40.7880081, lng: -73.817381}, {lat: 40.77980580000001, lng: -73.7670502}, {lat: 40.78895199999999, lng: -73.7902124}, {lat: 40.74100929999999, lng: -73.7257973}, {lat: 40.6610113, lng: -73.7710736}, {lat: 40.714891, lng: -73.91349199999999}, {lat: 40.7210307, lng: -73.9041002}, {lat: 40.7216279, lng: -73.9031179}, {lat: 40.6977424, lng: -73.96488839999999}, {lat: 40.7605852, lng: -73.8397008}, {lat: 22.305905, lng: 73.169967}, {lat: 22.305905, lng: 73.169967}, {lat: 31.4501943, lng: 74.26611129999999}, {lat: 40.7242841, lng: -73.898448},  {lat: 46.18755059999999, lng: 4.7755776}, {lat: 39.3296853, lng: -81.5469607}, {lat: 39.3356941, lng: -81.54293129999999}, {lat: 40.721673, lng: -73.83596090000002},  {lat: 40.7666428, lng: -73.8908391}, {lat: 40.736197, lng: -73.7136441}, {lat: 40.7088516, lng: -73.8425887},  {lat: 40.75061669999999, lng: -73.8191207}, {lat: 40.7378896, lng: -73.8495973},  {lat: 30.3110003, lng: -97.7406937}, {lat: -37.869172, lng: 144.980107}, {lat: 40.7363789, lng: -73.7875803}, {lat: 40.7515217, lng: -73.37151519999999}, {lat: 40.756576, lng: -73.977032}, {lat: 40.7577702, lng: -73.892394}, {lat: 40.755796, lng: -73.88352069999999}, {lat: 46.0710316, lng: -122.8650961}, {lat: 40.4881219, lng: -74.48684539999999}, {lat: 40.7542081, lng: -73.3598288}, {lat: 40.734365, lng: -73.9226963}, {lat: 40.6930142, lng: -73.98622519999999}, {lat: 40.6770591, lng: -73.9659806}, {lat: 40.7566762, lng: -73.8288036}, {lat: 40.7577671, lng: -73.86098969999999}, {lat: 40.7583571, lng: -73.85562949999999}, {lat: 40.7536463, lng: -73.9145175}, {lat: 40.7529629, lng: -73.91026049999999}, {lat: 40.7539039, lng: -73.9012108}, {lat: 40.7542568, lng: -73.89810229999999}, {lat: 40.755513, lng: -73.8853523}, {lat: 40.75329000000001, lng: -73.9068996}, {lat: 40.7567594, lng: -73.8736078}, {lat: 40.7706348, lng: -73.7354489}, {lat: 40.7631223, lng: -73.8320758}, {lat: 40.7646997, lng: -73.82349789999999}, {lat: 40.7524821, lng: -73.9243144}, {lat: 40.7640594, lng: -73.82809639999999}, {lat: 31.63334339999999, lng: -87.1118233}, {lat: 40.7452078, lng: -73.89426259999999}, {lat: 40.7441902, lng: -73.92612199999999}, {lat: 40.7441902, lng: -73.92612199999999}, {lat: 40.7431192, lng: -73.9168088}, {lat: 40.74239619999999, lng: -73.91381350000002}, {lat: 40.7451254, lng: -73.9335294}, {lat: 40.7489517, lng: -73.9373553}, {lat: 40.7502351, lng: -73.9380863}, {lat: 40.6724383, lng: -73.78572489999999}, {lat: 40.6407176, lng: -73.7433452}, {lat: 40.6375746, lng: -73.74094869999999}, {lat: 40.6596598, lng: -73.7739524}, {lat: 40.6562114, lng: -73.76726529999999}, {lat: 40.6667552, lng: -73.7800212}, {lat: 40.6744207, lng: -73.8020884}, {lat: 40.6744207, lng: -73.8020884}, {lat: 40.7616177, lng: -73.8220683}, {lat: 40.6656848, lng: -73.7908865}, {lat: 40.595727, lng: -73.7646259}, {lat: 40.5965654, lng: -73.74416409999999}, {lat: 40.7185425, lng: -73.73529309999999}, {lat: 40.6801366, lng: -73.753019}, {lat: 40.7439849, lng: -73.7175493}, {lat: 40.6938975, lng: -73.8121319}, {lat: 40.6869641, lng: -73.80825519999999}, {lat: 40.684839, lng: -73.806063}, {lat: -28.4625882, lng: 21.2366998},  {lat: 40.7059682, lng: -73.8176774}, {lat: 40.6995059, lng: -73.8146127}, {lat: 40.6972552, lng: -73.81399379999999}, {lat: 40.7392042, lng: -73.844084}, {lat: 40.7040258, lng: -73.816361}, {lat: 40.7438783, lng: -73.83760850000002}, {lat: 40.6744207, lng: -73.8020884}, {lat: 40.6842585, lng: -73.8460438}, {lat: 40.6898558, lng: -73.8500032}, {lat: 40.7278835, lng: -73.87086400000001}, {lat: 40.7329291, lng: -73.8707901}, {lat: 40.693694, lng: -73.8520891}, {lat: 40.7118189, lng: -73.85964969999999}, {lat: 40.6975278, lng: -73.85286909999999});

        var cam_link_header = 'dotsignals.org/multiview2.php?listcam=';
        var brooklyn_links = new Array(1030, 491, 974, 1003, 139, 518, 141, 132, 140, 496, 624, 611, 595, 620, 583, 615, 619, 627, 614, 622, 588, 616, 915, 839, 877, 878, 439, 440, 487, 488, 493, 565, 564, 206, 871, 872, 723, 707, 852, 724, 853, 851, 912, 913, 580, 578, 577, 572, 573, 697, 424, 901, 857, 856, 914);
        var queens_links = new Array(973, 924, 816, 815, 818, 817, 819, 128, 699, 443, 632, 123, 448, 873, 911, 874, 875, 706, 1078, 703, 696, 936, 1079, 700, 450, 281, 143, 120, 829, 1008, 1009, 1010, 1011, 1029, 119, 118, 160, 1012, 1013, 604, 606, 607, 612, 788, 916, 900, 894, 712, 799, 662, 643, 651, 654, 655, 656, 664, 653, 646, 658, 663, 927, 848, 849, 978, 880, 979, 290, 972, 977, 939, 746, 925, 881, 976, 882, 485, 126, 868, 921, 1027, 288, 161, 737, 215, 833, 837, 714, 843, 836, 842, 831, 830, 886, 834, 854, 855, 744, 743, 745, 582, 581, 579, 596, 590, 586, 585, 599, 587, 597, 574, 1077, 1075, 905, 1072, 708, 1073, 1074);
        var manhattan_links = new Array(368, 360, 361, 550, 940, 370, 537, 1014, 828, 1028, 326, 192, 548, 547, 545, 544, 543, 794, 165, 551, 366, 472, 164, 934, 846, 328, 495, 403, 398, 410, 399, 400, 845, 168, 415, 523, 169, 906, 908, 509, 511, 170, 173, 171, 414, 473, 717, 529, 510, 501, 891, 416, 504, 503, 180, 181, 420, 179, 500, 229, 178, 507, 506, 502, 508, 248, 526, 527, 741, 847, 514, 172,  989, 990, 986, 987, 937, 224, 475, 899, 187, 421, 739, 445, 351, 452, 175, 988, 435, 434, 166, 965, 966, 964, 967, 968, 969, 970, 971, 347, 163, 505, 524, 182, 176, 177, 790, 791, 795, 735, 734, 733, 732, 731, 736, 930, 274, 188, 253, 689, 691, 690, 186, 437, 436, 183, 223, 929, 841, 840, 519, 838, 516, 517, 512, 558, 554, 933, 895, 157, 720, 722, 530, 521, 542, 413, 412, 404, 540, 406, 522, 528, 536, 932, 287, 446, 531, 419, 552, 909, 910, 426, 427, 430, 438, 740, 532, 826, 535, 339, 338, 985);
        var staten_island_links = new Array(862, 861, 859, 860, 864, 358, 858, 850, 863, 618, 1061, 1060, 1062, 244, 1071, 638, 644, 639, 154, 631, 628, 451, 702);
        var bronx_links = new Array(1039, 1040, 730, 1026, 1041, 1042, 824, 823, 318, 812, 825, 278, 294, 811, 146, 1035, 277, 866, 884, 885, 1058, 1036, 1034);

        for (const borough of all_camera_link) {
          borough += cam_link_header
        };

        var map = new google.maps.Map(document.getElementById('map'), {
          center: middle,
          zoom: 15
        });

        var marker1 = new google.maps.Marker({
          position: origin,
          map: map,
          label: 'A'
        });

        var marker2 = new google.maps.Marker({
          position: dest,
          map: map,
          label: 'B'
        });

        var line = new google.maps.Polyline({
          path: route,
          geodesic: true,
          strokeColor: "#FF0000",
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        var line2 = new googl.maps.Polyline({
          path: route2,
          geodesic: true,
          strokeColor: "#FF0000",
          strokeOpacity: 1.0,
          strokeWeight: 2
        });

        line.setMap(map);
        line2.setMap(map);

        var best_route = get_cameras(line, line2, all_camera_pos, all_camera_link);
      }

      function get_cameras(l, l2, ci, cl) {
        let links1 = [];
        let links2 = [];
        let sum1 = 0;
        let sum2 = 0;

        for (const borough of ci) {
          for (let camera = 0; camera < borough[camera].length; camera++) {
            if (google.maps.geometry.poly.isLocationOnEdge(new google.maps.LatLag(camera.lat,camera.lng), l, 0.001)) {
              sum1++;
              links1.push(cl[borough][camera]);
            }
            else {
              sum2++;
              link2.push(cl[borough][camera])
            }
          }
        }

        if (sum1 > sum2) {
          return {
            route: l,
            camera_links: links1
          }
        }
        else {
          return {
            route: l2,
            camera_links: links2
          }
        }
      }
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCrIErnSCAoA07R_m9NqNIQNcuD0Cf3Vn4&callback=initMap"
    async defer></script>
  </body>
</html>
